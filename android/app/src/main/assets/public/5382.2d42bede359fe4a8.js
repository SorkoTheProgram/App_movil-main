"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5382],{5382:(E,c,s)=>{s.r(c),s.d(c,{PerfilPageModule:()=>p});var l=s(177),d=s(4341),r=s(4742),u=s(4964),f=s(467),i=s(4438),g=s(1148),v=s(4171),j=s(7687);let F=(()=>{var o;class t{constructor(e){this.firestore=e}getHistorialViajes(e){return this.firestore.collection("viajes",a=>a.where("pasajeros","array-contains",e)).valueChanges()}}return(o=t).\u0275fac=function(e){return new(e||o)(i.KVO(j.Qe))},o.\u0275prov=i.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),t})();function m(o,t){if(1&o&&(i.j41(0,"ion-accordion")(1,"ion-item",5)(2,"ion-label"),i.EFF(3),i.nI1(4,"date"),i.k0s()(),i.j41(5,"ion-list",6)(6,"ion-item")(7,"ion-label"),i.EFF(8),i.k0s()(),i.j41(9,"ion-item")(10,"ion-label"),i.EFF(11),i.k0s()(),i.j41(12,"ion-item")(13,"ion-label"),i.EFF(14),i.k0s()(),i.j41(15,"ion-item")(16,"ion-label"),i.EFF(17),i.k0s()()()()),2&o){const n=t.$implicit;i.R7$(3),i.JRh(i.i5U(4,6,n.fecha,"dd/MM/yyyy HH:mm")),i.R7$(5),i.Lme("Destino: ",n.destino,", ",n.comunaViaje,""),i.R7$(3),i.SpI("Costo: ",n.precio,""),i.R7$(3),i.SpI("Conductor: ",n.conductor,""),i.R7$(3),i.SpI("Patente: ",n.patente,"")}}const h=[{path:"",component:(()=>{var o;class t{constructor(){this.usuario=null,this.viajes=[],this.authSvc=(0,i.WQX)(g.u),this.utilsSvc=(0,i.WQX)(v.T),this.viajesSvc=(0,i.WQX)(F)}ngOnInit(){this.cargarDatosUsuario()}cargarDatosUsuario(){var e=this;return(0,f.A)(function*(){if(e.usuario=e.utilsSvc.obtenerDelLocalStorage("usuario"),e.usuario)e.cargarHistorialViajes(e.usuario.email);else try{const a=yield e.authSvc.obtenerDatosUsuarioActual();a&&(e.usuario=a,e.utilsSvc.guardarEnLocalStorage("usuario",a),e.cargarHistorialViajes(a.email))}catch(a){console.error("Error al obtener los datos del usuario:",a)}})()}cargarHistorialViajes(e){this.viajesSvc.getHistorialViajes(e).subscribe(a=>{this.viajes=a},a=>{console.error("Error al cargar el historial de viajes:",a)})}editarPerfil(){console.log("Editando perfil...")}cerrarSesion(){this.authSvc.cerrarSesion()}}return(o=t).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=i.VBU({type:o,selectors:[["app-perfil"]],decls:37,vars:7,consts:[[1,"ion-padding"],[1,"profile-container"],["src","assets/joncena.jpeg","alt","Foto de perfil"],["routerLink","/editar-perfil","expand","full"],[4,"ngFor","ngForOf"],["slot","header"],["slot","content"]],template:function(e,a){1&e&&(i.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),i.EFF(3,"Perfil"),i.k0s()()(),i.j41(4,"ion-content",0)(5,"div",1)(6,"ion-avatar"),i.nrm(7,"img",2),i.k0s(),i.j41(8,"h2"),i.EFF(9),i.k0s(),i.j41(10,"p"),i.EFF(11),i.k0s()(),i.j41(12,"ion-list")(13,"ion-item")(14,"ion-label"),i.EFF(15,"Nombre:"),i.k0s(),i.j41(16,"ion-text"),i.EFF(17),i.k0s()(),i.j41(18,"ion-item")(19,"ion-label"),i.EFF(20,"Apellido:"),i.k0s(),i.j41(21,"ion-text"),i.EFF(22),i.k0s()(),i.j41(23,"ion-item")(24,"ion-label"),i.EFF(25,"Correo Electr\xf3nico:"),i.k0s(),i.j41(26,"ion-text"),i.EFF(27),i.k0s()()(),i.j41(28,"ion-button",3),i.EFF(29,"Cambiar Contrase\xf1a"),i.k0s(),i.j41(30,"ion-card")(31,"ion-card-header")(32,"ion-card-title"),i.EFF(33,"Historial de viajes"),i.k0s()(),i.j41(34,"ion-card-content")(35,"ion-accordion-group"),i.DNE(36,m,18,9,"ion-accordion",4),i.k0s()()()()),2&e&&(i.R7$(9),i.Lme("",null==a.usuario?null:a.usuario.nombre," ",null==a.usuario?null:a.usuario.apellido,""),i.R7$(2),i.JRh(null==a.usuario?null:a.usuario.email),i.R7$(6),i.JRh(null==a.usuario?null:a.usuario.nombre),i.R7$(5),i.JRh(null==a.usuario?null:a.usuario.apellido),i.R7$(5),i.JRh(null==a.usuario?null:a.usuario.email),i.R7$(9),i.Y8G("ngForOf",a.viajes))},dependencies:[l.Sq,r.xk,r.YH,r.mC,r.Jm,r.b_,r.I9,r.ME,r.tN,r.W9,r.eU,r.uz,r.he,r.nf,r.IO,r.BC,r.ai,r.N7,u.Wk,l.vh],styles:["ion-toolbar[_ngcontent-%COMP%]{--background: #20f7ef;--color: rgb(0, 0, 0)}"]}),t})()}];let P=(()=>{var o;class t{}return(o=t).\u0275fac=function(e){return new(e||o)},o.\u0275mod=i.$C({type:o}),o.\u0275inj=i.G2t({imports:[u.iI.forChild(h),u.iI]}),t})(),p=(()=>{var o;class t{}return(o=t).\u0275fac=function(e){return new(e||o)},o.\u0275mod=i.$C({type:o}),o.\u0275inj=i.G2t({imports:[l.MD,d.YN,r.bv,P]}),t})()}}]);