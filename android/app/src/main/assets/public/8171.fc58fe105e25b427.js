"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8171],{8171:(f,c,t)=>{t.r(c),t.d(c,{ViajesDisponiblesPageModule:()=>v});var l=t(4964),j=t(177),o=t(4742),e=t(4438),p=t(7687);function d(s,r){if(1&s){const a=e.RV6();e.j41(0,"ion-content",4)(1,"ion-card")(2,"ion-card-header")(3,"ion-card-title"),e.EFF(4),e.k0s(),e.j41(5,"ion-card-subtitle"),e.EFF(6),e.k0s()(),e.j41(7,"ion-card-content")(8,"p")(9,"strong"),e.EFF(10,"Conductor:"),e.k0s(),e.EFF(11),e.k0s(),e.j41(12,"p")(13,"strong"),e.EFF(14,"Modelo del Auto:"),e.k0s(),e.EFF(15),e.k0s(),e.j41(16,"p")(17,"strong"),e.EFF(18,"Patente:"),e.k0s(),e.EFF(19),e.k0s(),e.j41(20,"p")(21,"strong"),e.EFF(22,"Precio:"),e.k0s(),e.EFF(23),e.k0s(),e.j41(24,"p")(25,"strong"),e.EFF(26,"Asientos Disponibles:"),e.k0s(),e.EFF(27),e.k0s()()(),e.j41(28,"ion-button",5),e.bIt("click",function(){e.eBV(a);const n=e.XpG();return e.Njj(n.tomarViaje())}),e.EFF(29," Tomar este viaje "),e.k0s()()}if(2&s){const a=e.XpG();e.R7$(4),e.JRh(a.viaje.destino),e.R7$(2),e.JRh(a.viaje.comunaViaje),e.R7$(5),e.SpI(" ",a.viaje.conductor,""),e.R7$(4),e.SpI(" ",a.viaje.modelo,""),e.R7$(4),e.SpI(" ",a.viaje.patente,""),e.R7$(4),e.SpI(" $",a.viaje.precio,""),e.R7$(4),e.SpI(" ",a.viaje.asientos,"")}}function g(s,r){1&s&&e.nrm(0,"ion-loading",6)}const u=[{path:"",component:(()=>{var s;class r{constructor(i,n,h){this.route=i,this.firestore=n,this.router=h,this.viajeId="",this.viaje=null,this.pasajeroId="user-id"}ngOnInit(){this.viajeId=this.route.snapshot.paramMap.get("id"),this.cargarViaje()}cargarViaje(){this.firestore.collection("viajes").doc(this.viajeId).get().subscribe(i=>{i.exists?this.viaje=i.data():console.log("Viaje no encontrado")})}tomarViaje(){if(this.viaje){const i=this.viaje.pasajeros;i.includes(this.pasajeroId)?console.log("Ya est\xe1s en la lista de pasajeros"):(i.push(this.pasajeroId),this.firestore.collection("viajes").doc(this.viajeId).update({pasajeros:i,estado:"pendiente"}).then(()=>{console.log("Viaje tomado con \xe9xito"),this.router.navigate(["/viaje-en-curso"])}).catch(n=>{console.error("Error al tomar el viaje: ",n)}))}}}return(s=r).\u0275fac=function(i){return new(i||s)(e.rXU(l.nX),e.rXU(p.Qe),e.rXU(l.Ix))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-viajes-disponibles"]],decls:8,vars:2,consts:[["slot","start"],["defaultHref","/home"],["class","ion-padding",4,"ngIf"],["message","Cargando detalles del viaje...",4,"ngIf"],[1,"ion-padding"],["expand","full","color","success",3,"click"],["message","Cargando detalles del viaje..."]],template:function(i,n){1&i&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.nrm(3,"ion-back-button",1),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Viajes Disponibles"),e.k0s()()(),e.DNE(6,d,30,7,"ion-content",2)(7,g,1,0,"ion-loading",3)),2&i&&(e.R7$(6),e.Y8G("ngIf",n.viaje),e.R7$(),e.Y8G("ngIf",!n.viaje))},dependencies:[j.bT,o.Jm,o.QW,o.b_,o.I9,o.ME,o.HW,o.tN,o.W9,o.eU,o.rQ,o.BC,o.ai,o.el],styles:["ion-toolbar[_ngcontent-%COMP%]{--background: #20f7ef;--color: rgb(0, 0, 0)}"]}),r})()}];let v=(()=>{var s;class r{}return(s=r).\u0275fac=function(i){return new(i||s)},s.\u0275mod=e.$C({type:s}),s.\u0275inj=e.G2t({imports:[j.MD,o.bv,l.iI.forChild(u)]}),r})()}}]);